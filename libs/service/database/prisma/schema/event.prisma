model Event {
  id           String           @id @default(uuid(7))
  title        String
  description  String?
  startTime    DateTime
  endTime      DateTime
  location     String?
  userId       String
  user         UserAccount      @relation("UserEvents", fields: [userId], references: [id])
  attendees    EventAttendee[]
  recurrenceId String?          @unique
  recurrence   EventRecurrence? @relation(fields: [recurrenceId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum EventAttendeeStatus {
  PENDING
  ACCEPTED
  DECLINED
  TENTATIVE
  UNKNOWN
}

model EventAttendee {
  id        String              @id @default(uuid(7))
  eventId   String
  event     Event               @relation(fields: [eventId], references: [id])
  userId    String
  user      UserAccount         @relation(fields: [userId], references: [id])
  status    EventAttendeeStatus @default(PENDING)
  createdAt DateTime            @default(now())
  updatedAt DateTime            @updatedAt

  @@unique([eventId, userId]) // Ensure unique attendee per event
}

enum Frequency {
  DAILY
  WEEKLY
  MONTHLY
  YEARLY
}

model EventRecurrence {
  id         String    @id @default(uuid(7))
  frequency  Frequency
  interval   Int
  startingAt DateTime  @default(now())
  endingAt   DateTime?
  event      Event[]
}
